{"ast":null,"code":"function DemoPage(props) {\n  var stage;\n\n  function init() {\n    var canvas = document.getElementById(\"canvas\");\n    if (!canvas || !canvas.getContext) return;\n    stage = new createjs.Stage(canvas);\n    stage.enableMouseOver(true);\n    stage.mouseMoveOutside = true;\n    createjs.Touch.enable(stage);\n    var imgList = [\"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/1.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/2.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/3.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/4.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/5.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/6.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/7.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/8.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/10.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/11.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/12.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/13.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/14.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/15.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/16.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/17.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/18.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/19.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/20.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/21.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/22.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/23.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/24.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/25.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/26.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/27.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/28.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/29.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/30.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/31.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/32.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/33.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/34.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/35.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/36.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/37.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/38.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/39.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/40.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/41.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/42.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/43.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/44.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/45.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/46.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/47.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/48.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/49.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/50.png\", \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/51.png\"];\n    var images = [],\n        loaded = 0,\n        currentFrame = 0,\n        totalFrames = imgList.length;\n    var rotate360Interval, start_x;\n    var bg = new createjs.Shape();\n    stage.addChild(bg);\n    var bmp = new createjs.Bitmap();\n    stage.addChild(bmp);\n    var myTxt = new createjs.Text(\"360 Car\", '24px Ubuntu', \"#ffffff\");\n    myTxt.x = myTxt.y = 20;\n    myTxt.alpha = 0.08;\n    stage.addChild(myTxt);\n\n    function load360Image() {\n      var img = new Image();\n      img.src = imgList[loaded];\n      img.onload = img360Loaded;\n      images[loaded] = img;\n    }\n\n    function img360Loaded(event) {\n      loaded++;\n      bg.graphics.clear();\n      bg.graphics.beginFill(\"#222\").drawRect(0, 0, stage.canvas.width * loaded / totalFrames, stage.canvas.height);\n      bg.graphics.endFill();\n      if (loaded == totalFrames) start360();else load360Image();\n    }\n\n    function start360() {\n      document.body.style.cursor = 'none'; // 360 icon\n\n      var iconImage = new Image();\n      iconImage.src = \"\";\n      iconImage.onload = iconLoaded; // update-draw\n\n      update360(0); // first rotation\n\n      rotate360Interval = setInterval(function () {\n        if (currentFrame === totalFrames - 1) {\n          clearInterval(rotate360Interval);\n          addNavigation();\n        }\n\n        update360(1);\n      }, 25);\n    }\n\n    function iconLoaded(event) {\n      var iconBmp = new createjs.Bitmap();\n      iconBmp.image = event.target;\n      iconBmp.x = 20;\n      iconBmp.y = canvas.height - iconBmp.image.height - 20;\n      stage.addChild(iconBmp);\n    }\n\n    function update360(dir) {\n      currentFrame += dir;\n      if (currentFrame < 0) currentFrame = totalFrames - 1;else if (currentFrame > totalFrames - 1) currentFrame = 0;\n      bmp.image = images[currentFrame];\n    } //------------------------------- \n\n\n    function addNavigation() {\n      stage.onMouseOver = mouseOver;\n      stage.onMouseDown = mousePressed;\n      document.body.style.cursor = 'auto';\n    }\n\n    function mouseOver(event) {\n      document.body.style.cursor = 'pointer';\n    }\n\n    function mousePressed(event) {\n      start_x = event.rawX;\n      stage.onMouseMove = mouseMoved;\n      stage.onMouseUp = mouseUp;\n      document.body.style.cursor = 'w-resize';\n    }\n\n    function mouseMoved(event) {\n      var dx = event.rawX - start_x;\n      var abs_dx = Math.abs(dx);\n\n      if (abs_dx > 5) {\n        update360(dx / abs_dx);\n        start_x = event.rawX;\n      }\n    }\n\n    function mouseUp(event) {\n      stage.onMouseMove = null;\n      stage.onMouseUp = null;\n      document.body.style.cursor = 'pointer';\n    }\n\n    function handleTick() {\n      stage.update();\n    }\n\n    document.body.style.cursor = 'progress';\n    load360Image(); // TICKER\n\n    createjs.Ticker.addEventListener(\"tick\", handleTick);\n    createjs.Ticker.setFPS(60);\n    createjs.Ticker.useRAF = true;\n  } // Init\n\n\n  window.addEventListener('load', init, false);\n}\n\n_c = DemoPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"DemoPage\");","map":{"version":3,"sources":["/Users/miguelpereira/Documents/360-CATALOG-MODULES/catalog-funnel-frontend/react_app/src/DemoPage.js"],"names":["DemoPage","props","stage","init","canvas","document","getElementById","getContext","createjs","Stage","enableMouseOver","mouseMoveOutside","Touch","enable","imgList","images","loaded","currentFrame","totalFrames","length","rotate360Interval","start_x","bg","Shape","addChild","bmp","Bitmap","myTxt","Text","x","y","alpha","load360Image","img","Image","src","onload","img360Loaded","event","graphics","clear","beginFill","drawRect","width","height","endFill","start360","body","style","cursor","iconImage","iconLoaded","update360","setInterval","clearInterval","addNavigation","iconBmp","image","target","dir","onMouseOver","mouseOver","onMouseDown","mousePressed","rawX","onMouseMove","mouseMoved","onMouseUp","mouseUp","dx","abs_dx","Math","abs","handleTick","update","Ticker","addEventListener","setFPS","useRAF","window"],"mappings":"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","sourcesContent":["\n\nfunction DemoPage(props){\nvar stage;\n\nfunction init() {   \n\tvar canvas = document.getElementById(\"canvas\");\n    if (!canvas || !canvas.getContext) return;\n\t\t\n\tstage = new createjs.Stage(canvas);  \n    stage.enableMouseOver(true);\n    stage.mouseMoveOutside = true; \n    createjs.Touch.enable(stage);\n    \n    var imgList = [\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/1.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/2.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/3.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/4.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/5.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/6.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/7.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/8.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/10.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/11.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/12.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/13.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/14.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/15.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/16.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/17.png\", \n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/18.png\", \n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/19.png\", \n               \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/20.png\", \n               \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/21.png\",\n               \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/22.png\",\n               \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/23.png\",\n               \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/24.png\",\n               \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/25.png\",\n               \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/26.png\", \n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/27.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/28.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/29.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/30.png\",\n             \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/31.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/32.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/33.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/34.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/35.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/36.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/37.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/38.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/39.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/40.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/41.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/42.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/43.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/44.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/45.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/46.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/47.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/48.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/49.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/50.png\",\n              \"https://res.cloudinary.com/dewn0wy2s/image/upload/v1592668487/360/51.png\"];  \n              \n    var images = [], loaded = 0, currentFrame = 0, totalFrames = imgList.length; \n    var rotate360Interval, start_x;\n    \n    var bg = new createjs.Shape();\n    stage.addChild(bg);  \n    \n    var bmp = new createjs.Bitmap();\t  \n    stage.addChild(bmp);\n    \n    var myTxt = new createjs.Text(\"360 Car\", '24px Ubuntu', \"#ffffff\");\n    myTxt.x = myTxt.y =20;\n    myTxt.alpha = 0.08;\n    stage.addChild(myTxt);   \n    \n    \n    function load360Image() {\n        var img = new Image();\n        img.src = imgList[loaded];\n        img.onload = img360Loaded;\n        images[loaded] = img;   \n    }\n    \n    function img360Loaded(event) {\n        loaded++;        \n        bg.graphics.clear()\n        bg.graphics.beginFill(\"#222\").drawRect(0,0,stage.canvas.width * loaded/totalFrames, stage.canvas.height);\n        bg.graphics.endFill();\n        \n        if(loaded==totalFrames) start360();\n        else load360Image();\n    }\n\n    \n    function start360() {\n        document.body.style.cursor='none';\n        \n        // 360 icon\n        var iconImage = new Image();\n        iconImage.src = \"\";\n        iconImage.onload = iconLoaded;        \n       \n        // update-draw\n        update360(0);\n        \n        // first rotation\n        rotate360Interval = setInterval(function(){ if(currentFrame===totalFrames-1) { clearInterval(rotate360Interval); addNavigation(); } update360(1); }, 25);\n    }\n    \n    function iconLoaded(event) {\n        var iconBmp = new createjs.Bitmap();\n        iconBmp.image = event.target;\n        iconBmp.x = 20;\n        iconBmp.y = canvas.height - iconBmp.image.height - 20;\n        stage.addChild(iconBmp);\n    }\n    \n    function update360(dir) {\n        currentFrame+=dir;\n        if(currentFrame<0) currentFrame = totalFrames-1;\n        else if(currentFrame>totalFrames-1) currentFrame = 0;\n        bmp.image = images[currentFrame];\n    }\n\n\n    //------------------------------- \n     function addNavigation() { \n        stage.onMouseOver = mouseOver;\n        stage.onMouseDown = mousePressed;        \n        document.body.style.cursor='auto';\n    }\n    \n    function mouseOver(event) {\n        document.body.style.cursor='pointer';\n    }\n    \n    function mousePressed(event) {\n        start_x = event.rawX;\n        stage.onMouseMove = mouseMoved;\n        stage.onMouseUp = mouseUp;\n        \n        document.body.style.cursor='w-resize';        \n    }\n    \n\tfunction mouseMoved(event) {\n        var dx = event.rawX - start_x;\n        var abs_dx = Math.abs(dx);\n        \n        if(abs_dx>5) {\n            update360(dx/abs_dx);\n            start_x = event.rawX;\n        }\n\t}\n    \n    function mouseUp(event) {\n        stage.onMouseMove = null;\n        stage.onMouseUp = null;         \n        document.body.style.cursor='pointer';\n\t}    \n    \n    function handleTick() {\t\n         stage.update();\n    }    \n    \n    document.body.style.cursor='progress';\n    load360Image();\n    \n    \n     // TICKER\n    createjs.Ticker.addEventListener(\"tick\", handleTick);\n    createjs.Ticker.setFPS(60);\n    createjs.Ticker.useRAF = true;\n}\n\n\n\n\n// Init\nwindow.addEventListener('load', init, false);\n\n}"]},"metadata":{},"sourceType":"module"}