{"ast":null,"code":"import _defineProperty from\"/Users/miguelpereira/Documents/360-CATALOG-MODULES/catalog-funnel-frontend/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/miguelpereira/Documents/360-CATALOG-MODULES/catalog-funnel-frontend/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/miguelpereira/Documents/360-CATALOG-MODULES/catalog-funnel-frontend/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import React,{useState,useEffect}from\"react\";import axios from'axios';import ReactDOM from'react-dom';import PricePage from'./PricePage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),productTypesArray=_useState2[0],setProductTypesArray=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),locationArray=_useState4[0],setLocationArray=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),productQuantityArray=_useState6[0],setProductQuantityArray=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),serviceTypesArray=_useState8[0],setServiceTypesArray=_useState8[1];var url='https://catalog-360-funnel-api.herokuapp.com/';var urlLocal=\"http://localhost:8080/\";var headers={\"Authorization\":props.token,\"Access-Control-Allow-Origin\":\"*\"//'Access-Control-Allow-Origin' : 'http://localhost:3000',\n//'Access-Control-AllowMethods':'GET,PUT,POST,DELETE,PATCH,OPTIONS'\n};var authAxios=axios.create({baseUrl:url,withCredential:true,headers:{Authorization:props.token//AccessControl:'http://localhost:3000',\n//AllowMethods:'GET,PUT,POST,DELETE,PATCH,OPTIONS'\n}});//FETCH INITIAL DATA\nuseEffect(function(){authAxios.get(url+\"rate/listProdType\",{headers:headers}).then(function(response){setProductTypesArray(response.data);console.log(props.token);},function(error){console.log(error);});},[]);//location\nuseEffect(function(){authAxios.get(url+\"rate/listLocs\",headers).then(function(response){setLocationArray(response.data);},function(error){console.log(error);});},[]);//productQuantity\nuseEffect(function(){authAxios.get(url+\"rate/listProdQuant\",headers).then(function(response){setProductQuantityArray(response.data);},function(error){console.log(error);});},[]);//ServiceTypes\nuseEffect(function(){authAxios.get(url+\"rate/listServTypes\",headers).then(function(response){setServiceTypesArray(response.data);},function(error){console.log(error);});},[]);//FETCH INITIAL DATA\nvar _useState9=useState({name:\"\",businessName:\"\",serviceTypes:[],product_type:\"SHOES\",product_quantity:\"25\",form_location:\"LISBON\",email:\"\"}),_useState10=_slicedToArray(_useState9,2),form=_useState10[0],setForm=_useState10[1];var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),count=_useState12[0],setCount=_useState12[1];var isFinalPage=false;var updateForm=function updateForm(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var updateServices=function updateServices(e){var name=e.target.value;if(e.target.checked===true){form.serviceTypes.push({name:name});}if(e.target.checked===false){for(var i=0;i<form.serviceTypes.length;i++){if(e.target.value===form.serviceTypes[i].name){form.serviceTypes.splice(i,1);}}}};function sendform(){var serviceTObject=[];for(var i=0;i<form.serviceTypes.length;i++){console.log(form.serviceTypes[i]);serviceTObject.push({name:form.serviceTypes[i].name});}var dataSend={\"user\":{\"personName\":form.name,\"businessName\":form.businessName,\"email\":form.email},\"serviceType\":serviceTObject,\"productType\":{\"name\":form.product_type},\"productQuantity\":{\"quantity\":form.product_quantity},\"location\":{\"name\":form.form_location}};var data=dataSend;authAxios.post(url+\"createForm\",data,headers).then(function(response){var formId=response.data.id;authAxios.get(url+\"getResults?id=\"+formId,headers).then(function(response){ReactDOM.render(/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsx(PricePage,{token:props.token,formId:formId,offer:response.data})}),document.getElementById('root'));},function(error){console.log(error);console.log(error.Authorization);});},function(error){console.log(error);console.log(error.Authorization);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"h1\",{style:{display:isFinalPage?\"none\":\"inline\"},children:[\"Step \",count,\" of 3\"]}),/*#__PURE__*/_jsxs(\"form\",{className:\"col-4 form\",style:{display:isFinalPage?\"none\":\"inline\"},target:\"_self\",children:[count===1?/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Your name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"name\",onChange:updateForm,value:form.name}),/*#__PURE__*/_jsx(\"label\",{children:\"Name of your business\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",name:\"businessName\",onChange:updateForm,value:form.businessName}),/*#__PURE__*/_jsx(\"label\",{children:\"Your email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",name:\"email\",onChange:updateForm,value:form.email})]}):null,count===2?/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select the services you need to present your products in a 360 View\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"To convert your catalog into 360 you have several  processes including \",/*#__PURE__*/_jsx(\"br\",{}),\" 360 photgraphy and software integrations to display and \",/*#__PURE__*/_jsx(\"br\",{}),\" allow your clients to interact with your product\"]}),/*#__PURE__*/_jsx(\"ul\",{children:serviceTypesArray.map(function(serviceType){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"serviceTypes\",onChange:updateServices,value:serviceType.name}),/*#__PURE__*/_jsx(\"label\",{for:\"cb1\",children:serviceType.name})]});})})]}):null,count===3?/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select your product type\"}),/*#__PURE__*/_jsx(\"select\",{defaultInputValue:productTypesArray[0].name,name:\"product_type\",id:\"product_type\",onChange:updateForm,value:form.product_type,children:productTypesArray.map(function(productType){return/*#__PURE__*/_jsx(\"option\",{value:productType.name,children:productType.name},productType.id);})}),/*#__PURE__*/_jsx(\"label\",{children:\"Select the number of products in your catalog\"}),/*#__PURE__*/_jsx(\"select\",{defaultInputValue:productQuantityArray[0].name,name:\"product_quantity\",id:\"product_quantity\",onChange:updateForm,value:form.product_quantity,children:productQuantityArray.map(function(prodQuant){return/*#__PURE__*/_jsx(\"option\",{value:prodQuant.name,children:prodQuant.name},prodQuant.id);})}),/*#__PURE__*/_jsx(\"label\",{children:\"Select the nearest location to your business\"}),/*#__PURE__*/_jsx(\"select\",{defaultInputValue:\"portooo\",name:\"form_location\",id:\"form_location\",onChange:updateForm,value:form.form_location,children:locationArray.map(function(location){return/*#__PURE__*/_jsx(\"option\",{value:location.name,children:location.name},location.id);})})]}):null]}),count===3?/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{onClick:sendform,children:\"Confirm\"})}):null,/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark\",type:\"submit\",formTarget:\"_self\",onClick:function onClick(){return setCount(count-1);},disabled:count<2,style:{display:isFinalPage?\"none\":\"inline\"},children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-light\",type:\"submit\",onClick:function onClick(){return setCount(count+1);},disabled:count>2,style:{display:isFinalPage?\"none\":\"inline\"},children:\"Next\"})]});}export default App;","map":{"version":3,"sources":["/Users/miguelpereira/Documents/360-CATALOG-MODULES/catalog-funnel-frontend/react_app/src/App.js"],"names":["React","useState","useEffect","axios","ReactDOM","PricePage","App","props","productTypesArray","setProductTypesArray","locationArray","setLocationArray","productQuantityArray","setProductQuantityArray","serviceTypesArray","setServiceTypesArray","url","urlLocal","headers","token","authAxios","create","baseUrl","withCredential","Authorization","get","then","response","data","console","log","error","name","businessName","serviceTypes","product_type","product_quantity","form_location","email","form","setForm","count","setCount","isFinalPage","updateForm","e","target","value","updateServices","checked","push","i","length","splice","sendform","serviceTObject","dataSend","post","formId","id","render","document","getElementById","display","map","serviceType","productType","prodQuant","location"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, { useState ,useEffect} from \"react\" \nimport axios from 'axios';\nimport ReactDOM from 'react-dom';\nimport PricePage from './PricePage';\n\n\nfunction App(props) {\n\n  const [productTypesArray, setProductTypesArray] = useState([])\n  const [locationArray,setLocationArray] = useState([])\n  const [productQuantityArray,setProductQuantityArray] = useState([])\n  const [serviceTypesArray,setServiceTypesArray] = useState([])\n  const url = 'https://catalog-360-funnel-api.herokuapp.com/';\n  const urlLocal = \"http://localhost:8080/\";\n\n  \n\n  const headers = {\n    \"Authorization\":props.token,\n    \"Access-Control-Allow-Origin\": \"*\"\n    //'Access-Control-Allow-Origin' : 'http://localhost:3000',\n    //'Access-Control-AllowMethods':'GET,PUT,POST,DELETE,PATCH,OPTIONS'\n  }\n\n  const authAxios = axios.create({\n    baseUrl : url,\n    withCredential: true,\n    headers:{\n      Authorization: props.token,\n      //AccessControl:'http://localhost:3000',\n      //AllowMethods:'GET,PUT,POST,DELETE,PATCH,OPTIONS'\n      \n    }\n  })\n\n  //FETCH INITIAL DATA\n\n  \n    useEffect(() => {\n\n    authAxios.get(url+\"rate/listProdType\",{headers:headers}).then((response) => {\n      setProductTypesArray(response.data);\n      console.log(props.token);\n      \n    }, (error) => {\n      console.log(error);\n   \n    },);\n\n    },[])\n\n    //location\n    useEffect(() => {\n      \n      authAxios.get(url+\"rate/listLocs\", headers).then((response) => {\n        setLocationArray(response.data);\n        \n      }, (error) => {\n        console.log(error);\n     \n      },);\n      },[])\n  \n      //productQuantity\n      useEffect(() => {\n        \n        authAxios.get(url+\"rate/listProdQuant\", headers).then((response) => {\n          setProductQuantityArray(response.data);\n          \n        }, (error) => {\n          console.log(error);\n       \n        },);\n        },[])\n\n        //ServiceTypes\n        useEffect(() => {\n          \n          authAxios.get(url+\"rate/listServTypes\", headers).then((response) => {\n            setServiceTypesArray(response.data);\n            \n          }, (error) => {\n            console.log(error);\n         \n          },);\n          },[])\n      \n          \n\n\n\n  //FETCH INITIAL DATA\n\n  const [form, setForm] = useState({\n    name: \"\",\n    businessName: \"\",\n    serviceTypes:[],\n    product_type:\"SHOES\",\n    product_quantity:\"25\",\n    form_location:\"LISBON\",\n    email:\"\"\n  })\n\n  \n\n  const [count, setCount] = useState(1)\n  const isFinalPage = false;\n  const updateForm = (e) => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value,\n    })\n\n\n  }\n\n  const updateServices = (e) => {\n    \n    let name  = e.target.value;\n    \n    \n    if(e.target.checked === true){\n      form.serviceTypes.push({\n        name:name\n      })\n    }\n\n    if(e.target.checked === false){\n     \n   \n\n      for(let i = 0; i < form.serviceTypes.length ;i++){\n       \n        \n        if(e.target.value === form.serviceTypes[i].name){\n          form.serviceTypes.splice(i, 1);\n        }\n      }\n      \n    }\n\n    \n  }\n  \n\n\nfunction sendform(){\n\n  \n  \n  let serviceTObject = [];\n\n  for(let i = 0; i < form.serviceTypes.length; i++){\n\n    console.log(form.serviceTypes[i]);\n\n    serviceTObject.push({\n      name:form.serviceTypes[i].name\n    })\n  }\n\n  const dataSend = {\n    \"user\":{\n        \"personName\":form.name,\n            \"businessName\":form.businessName,\n            \"email\":form.email\n    },\n\n    \"serviceType\":serviceTObject,\n\n    \"productType\":{\n        \"name\":form.product_type,\n    },\n\n    \"productQuantity\":{\n        \"quantity\":form.product_quantity\n    },\n    \"location\":{\n        \"name\":form.form_location\n    }\n\n    \n\n}\n  \n  const data = dataSend;\n\n  authAxios.post(url+\"createForm\", data, headers).then((response) => {\n\n    let formId = response.data.id;\n    \n  \n  authAxios.get(url+\"getResults?id=\"+formId, headers).then((response) => {\n   ReactDOM.render(\n      <React.StrictMode>\n        <PricePage token={props.token} formId={formId} offer={response.data} />\n      </React.StrictMode>,\n      document.getElementById('root')\n    );\n  \n  }, (error) => {\n    console.log(error);\n    console.log(error.Authorization);\n  });\n  }, (error) => {\n    console.log(error);\n    console.log(error.Authorization);\n  });\n\n}\n\n\n\n\n  return (\n\n   \n\n    <div className=\"App\">\n      \n      <h1 style={{display:isFinalPage ? \"none\" : \"inline\"}}>Step {count} of 3</h1>\n      \n      <form\n        className=\"col-4 form\"\n        style={{display:isFinalPage ? \"none\" : \"inline\"}}\n        target='_self'\n      >\n        {count === 1 ? (\n          <div className=\"form-group\">\n            <label>Your name</label>\n            <input\n              className=\"form-control\"\n              name=\"name\"\n              onChange={updateForm}\n              value={form.name}\n            />\n            <label>Name of your business</label>\n            <input\n              className=\"form-control\"\n              name=\"businessName\"\n              onChange={updateForm}\n              value={form.businessName}\n            />\n            \n          <label>Your email</label>\n          <input\n            type=\"email\"\n            className=\"form-control\"\n            name=\"email\"\n            onChange={updateForm}\n            value={form.email}\n          />\n          \n          </div>\n        ) : null}\n        {count === 2 ? (\n          <div className=\"form-group\">\n            <label>Select the services you need to present your products in a 360 View</label>\n            <label>To convert your catalog into 360 you have several  processes including <br></br> 360 photgraphy and software integrations to display and <br></br> allow your clients to interact with your product</label>\n            <ul>\n              {\n\n              serviceTypesArray.map(serviceType => (\n\n                \n              \n              <li ><input type=\"checkbox\"   name=\"serviceTypes\"\n                          onChange={updateServices}\n                          value={serviceType.name}/>\n                <label for=\"cb1\">{serviceType.name}</label>\n              </li>\n\n              ))\n              }\n            </ul>\n          </div>\n        ) : null}\n        {count === 3 ? (\n          <div className=\"form-group\">\n            <label>Select your product type</label>\n            <select defaultInputValue={productTypesArray[0].name} name=\"product_type\" id=\"product_type\" onChange={updateForm} value={form.product_type}>\n            {\n              productTypesArray.map(productType => ( \n                <option key={productType.id} value={productType.name}>{productType.name}</option>))\n              }\n             \n            </select>\n            \n            <label>Select the number of products in your catalog</label>\n            <select defaultInputValue={productQuantityArray[0].name} name=\"product_quantity\" id=\"product_quantity\" onChange={updateForm} value={form.product_quantity}>\n            {\n              productQuantityArray.map(prodQuant => ( \n                <option key={prodQuant.id} value={prodQuant.name}>{prodQuant.name}</option>))\n              }\n              \n            </select>\n\n            <label>Select the nearest location to your business</label>\n            <select defaultInputValue={\"portooo\"} name=\"form_location\" id=\"form_location\" onChange={updateForm} value={form.form_location}>\n            \n            {\n              \n              locationArray.map(location => ( \n                <option key={location.id} value={location.name}>{location.name}</option>))\n              }\n            </select>\n          </div>\n\n        ) : null}\n\n        \n\n\n\n        \n          </form>\n\n          {count === 3 ? (\n          <div className=\"form-group\">\n           <button onClick={sendform}>Confirm</button>\n          </div>\n        ):null}\n\n          <button\n        className=\"btn btn-dark\"\n        type=\"submit\"\n        formTarget=\"_self\"\n        onClick={() => setCount(count - 1)}\n        disabled={count < 2}\n        style={{display:isFinalPage ? \"none\" : \"inline\"}}\n      >\n        Back\n      </button>\n      <button\n        className=\"btn btn-light\"\n        type=\"submit\"\n        onClick={() => setCount(count + 1)}\n        disabled={count > 2}\n        style={{display:isFinalPage ? \"none\" : \"inline\"}}\n        \n      >\n        Next\n      </button>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}